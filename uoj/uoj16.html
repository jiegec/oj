<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
				<title>【NOIP2014】联合权值 - 题目 - Universal Online Judge</title>
		
		<script type="text/javascript">uojHome = 'http://uoj.ac'</script>

		<!-- Bootstrap core CSS -->
		<link type="text/css" rel="stylesheet" href="http://uoj.ac/css/bootstrap.min.css?v=2015.5.31" />		<!-- Bootstrap theme -->
		<link type="text/css" rel="stylesheet" href="http://uoj.ac/css/bootstrap-theme.min.css?v=2015.5.31" />
		<!-- Custom styles for this template -->
		<link type="text/css" rel="stylesheet" href="http://uoj.ac/theme/theme.css?v=2.33" />		
		<!-- jQuery (necessary for Bootstrap\'s JavaScript plugins) -->
		<script src="//upcdn.b0.upaiyun.com/libs/jquery/jquery-2.0.3.min.js"></script>
		
		<!-- jQuery autosize -->
		<script src="http://uoj.ac/js/jquery.autosize.min.js"></script>		<script type="text/javascript">
			$(document).ready(function() {
				$('textarea').autosize();
			});
		</script>
		
		<!-- jQuery cookie -->
		<script src="http://uoj.ac/js/jquery.cookie.min.js"></script>		
		<!-- jQuery tinysou -->
		<script src="http://uoj.ac/js/jquery.tinysou.js?v=2015.5.29"></script>		<link type="text/css" rel="stylesheet" href="http://uoj.ac/css/tinysou.css" />		
		<!-- jQuery modal -->
		<script src="http://uoj.ac/js/jquery.modal.js"></script>		
		<!-- jQuery tag canvas -->
				
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="http://uoj.ac/js/bootstrap.min.js?v=2015.5.31"></script>		
		<!-- Color converter -->
		<script src="http://uoj.ac/js/color-converter.min.js"></script>		
		<!-- uoj -->
		<script src="http://uoj.ac/js/uoj.js?v=2015.6.5"></script>		
		<!-- LAB -->
		<script src="http://uoj.ac/js/LAB.min.js"></script>
		<!-- UOJ ico -->
		<link rel="shortcut icon" href="http://uoj.ac/pictures/UOJ.ico" />
		
				
				
				
				
				
				<!-- MathJax -->
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({
				showProcessingMessages: false,
				tex2jax: {
					inlineMath: [["$", "$"], ["\\\\(", "\\\\)"]],
					processEscapes:true
				},
				menuSettings: {
					zoom: "Hover"
    			}
			});
		</script>
		<script src="//cdnjscn.b0.upaiyun.com/libs/mathjax/2.4.0/MathJax.js?config=TeX-AMS_HTML"></script>
				
				<!-- jquery form -->
		<script src="http://uoj.ac/js/jquery.form.min.js"></script>				
		
				
				
				
				
				<!-- shjs -->
		<link type="text/css" rel="stylesheet" href="http://uoj.ac/css/sh_typical.min.css" />		<script src="http://uoj.ac/js/sh_main.min.js"></script>		<script type="text/javascript">$(document).ready(function(){sh_highlightDocument()})</script>
				
		
		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		
		<script type="text/javascript">
		before_window_unload_message = null;
		$(window).on('beforeunload', function() {
			if (before_window_unload_message !== null) {
			    return before_window_unload_message;
			}
		});
		</script>
		
		<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?bbd5ae87bf89e087603a1988103688ff";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm, s);})();</script>
	</head>
	<body role="document">
		<div class="container theme-showcase" role="main">
						<div>
				<ul class="nav nav-pills pull-right" role="tablist">
									<li role="presentation"><a href="http://uoj.ac/login">登录</a></li>
					<li role="presentation"><a href="http://uoj.ac/register">注册</a></li>
								</ul>
				<h1 class="hidden-xs"><a href="http://uoj.ac"><img src="http://uoj.ac/pictures/UOJ.ico" alt="UOJ Logo" class="img-rounded" style="width:39px; height:39px;" /></a> Universal Online Judge</h1>
				<h1 class="visible-xs">UOJ</h1>
			</div>
			
			<script>
$(document).ready(function() {
	$('#ts-search-input').tinysouSearch({
		engineKey: 'uoj233',
		typingDelay: 200
	});
});
</script>
<div class="navbar navbar-default" role="navigation">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="http://uoj.ac">UOJ</a>
		</div>
		<div class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li><a href="/contests">比赛</a></li>
				<li><a href="/problems">题库</a></li>
				<li><a href="/submissions">提交记录</a></li>
				<li><a href="/hacks">Hack!</a></li>
				<li><a href="/blogs">博客</a></li>
				<li><a href="/faq">帮助</a></li>
			</ul>
			<form class="navbar-form navbar-right">
				<input type="text" placeholder="搜索" class="ts-search-input" id="ts-search-input">
			</form>
		</div><!--/.nav-collapse -->
	</div>
</div>
						
			<div class="uoj-content">
<div class="pull-right">
	<div class="uoj-click-zan-block" data-id="16" data-type="P" data-val="0" data-cnt="42"></div></div>

<h1 class="page-header text-center">#16. 【NOIP2014】联合权值</h1>
<a role="button" class="btn btn-info pull-right" href="/problem/16/statistics"><span class="glyphicon glyphicon-stats"></span> 统计</a>

<ul class="nav nav-tabs" role="tablist">
	<li class="active"><a href="#tab-statement" role="tab" data-toggle="tab"><span class="glyphicon glyphicon-book"></span> 描述</a></li>
	<li><a href="#tab-submit-answer" role="tab" data-toggle="tab"><span class="glyphicon glyphicon-upload"></span> 提交</a></li>
		<li><a href="#tab-custom-test" role="tab" data-toggle="tab"><span class="glyphicon glyphicon-console"></span> 自定义测试</a></li>
			</ul>
<div class="tab-content">
	<div class="tab-pane active" id="tab-statement">
		<article class="top-buffer-md"><p>无向连通图 $G$ 有 $n$ 个点，$n-1$ 条边。点从 $1$ 到 $n$ 依次编号,编号为 $i$ 的点的权值为 $W_i$，每条边的长度均为 $1$。图上两点 $(u, v)$ 的距离定义为 $u$ 点到 $v$ 点的最短距离。对于图 $G$ 上的点对 $(u, v)$，若它们的距离为 $2$，则它们之间会产生$W_v \times W_u$ 的联合权值。</p>
<p>请问图 $G$ 上所有可产生联合权值的有序点对中，联合权值最大的是多少？所有联合权值之和是多少？</p>
<h3>输入格式</h3>
<p>第一行包含 $1$ 个整数 $n$。</p>
<p>接下来 $n-1$ 行,每行包含 $2$ 个用空格隔开的正整数 $u,v$，表示编号为 $u$ 和编号为 $v$ 的点之间有边相连。</p>
<p>最后 $1$ 行,包含 $n$ 个正整数，每两个正整数之间用一个空格隔开，其中第 $i$ 个整数表示图 $G$ 上编号为 $i$ 的点的权值为 $W_i$。</p>
<h3>输出格式</h3>
<p>输出共 $1$ 行,包含 $2$ 个整数，之间用一个空格隔开,依次为图 $G$ 上联合权值的最大值和所有联合权值之和。<strong>由于所有联合权值之和可能很大，输出它时要对$10007$取余</strong>。</p>
<h3>样例一</h3>
<h4>input</h4>
<pre>
5
1 2
2 3
3 4
4 5
1 5 2 3 10

</pre>

<h4>output</h4>
<pre>
20 74

</pre>

<h4>explanation</h4>
<p>距离为 2 的有序点对有$(1,3), (2,4), (3,1), (3,5), (4,2), (5,3)$。其联合权值分别为 $2, 15, 2, 20, 15, 20$。其中最大的是 $20$，总和为 $74$。</p>
<h3>限制与约定</h3>
<p>对于30%的数据，$1 &lt; n \leq 100$；</p>
<p>对于60%的数据，$1 &lt; n \leq 2000$；</p>
<p>对于100%的数据，$1 &lt; n \leq 200000, 0 &lt; W_i \leq 10000$。</p>
<p>保证一定存在可产生联合权值的有序点对。</p>
<p><strong>时间限制：</strong>$1\texttt{s}$</p>
<p><strong>内存限制：</strong>$128\texttt{MB}$</p>
<h3>下载</h3>
<p><a href="/download.php?type=problem&amp;id=16">样例数据下载</a></p>
</article>
	</div>
	<div class="tab-pane" id="tab-submit-answer">
		<div class="top-buffer-sm"></div>
				<form action="/problem/16" method="post" class="form-horizontal" id="form-answer" enctype="multipart/form-data"><input type="hidden" name="_token" value="X3jo4VJGbnirsturdE0HIArw3K2gcRJcqGmFwvzvoeMdd8EKnCc8rJ43Oulp" /><div class="form-group" id="form-group-answer_answer"></div>
<script type="text/javascript">
$('#form-group-answer_answer').source_code_form_group('answer_answer', '源文件:answer', "<option selected=\"selected\">C++<\/option><option>Python2.7<\/option><option>Java7<\/option><option>C++11<\/option><option>Python3<\/option><option>Java8<\/option><option>C<\/option><option>Pascal<\/option>");
</script><div class="text-center"><button type="submit" id="button-submit-answer" name="submit-answer" value="answer" class="btn btn-default">提交</button></div></form><script type="text/javascript">
$(document).ready(function() {
	$('#form-answer').submit(function(e) {
		var ok = true;
		var post_data = {};
		if (post_data != {}) {
			post_data['check-answer'] = "";
			$.ajax({
				url : '/problem/16',
				type : 'POST',
				dataType : 'json',
				async : false,

				data : post_data,
				success : function(data) {
					if (data.extra != undefined) {
						alert(data.extra);
						ok = false;
					}
				}
			});
		}
		$(this).find("input[type='file']").each(function() {
			for (var i = 0; i < this.files.length; i++) {
				if (this.files[i].size > 10 * 1024 * 1024) {
					$('#div-' + $(this).attr('name')).addClass('has-error');
					$('#help-' + $(this).attr('name')).text('文件大小不能超过10M');
					ok = false;
				} else {
					$('#div-' + $(this).attr('name')).removeClass('has-error');
					$('#help-' + $(this).attr('name')).text('');
				}
			}
		});
		return ok;
	});
});
</script>	</div>
		<div class="tab-pane" id="tab-custom-test">
		<div class="top-buffer-sm"></div>
		<form action="/problem/16" method="post" class="form-horizontal" id="form-custom_test" enctype="multipart/form-data"><input type="hidden" name="_token" value="X3jo4VJGbnirsturdE0HIArw3K2gcRJcqGmFwvzvoeMdd8EKnCc8rJ43Oulp" /><div class="form-group" id="form-group-custom_test_answer"></div>
<script type="text/javascript">
$('#form-group-custom_test_answer').source_code_form_group('custom_test_answer', '源文件:answer', "<option selected=\"selected\">C++<\/option><option>Python2.7<\/option><option>Java7<\/option><option>C++11<\/option><option>Python3<\/option><option>Java8<\/option><option>C<\/option><option>Pascal<\/option>");
</script><div class="form-group" id="form-group-custom_test_input"></div>
<script type="text/javascript">
$('#form-group-custom_test_input').text_file_form_group('custom_test_input', '文本文件:input.txt');
</script><div id="div-custom_test_result"></div><div class="text-center"><button type="submit" id="button-submit-custom_test" name="submit-custom_test" value="custom_test" class="btn btn-default">运行</button></div></form><script type="text/javascript">
$(document).ready(function() {
	$('#form-custom_test').keydown(function(e) {
		if (e.keyCode == 13 && e.ctrlKey) {
			$('#button-submit-custom_test').click();
		}
	});
	$('#form-custom_test').submit(function(e) {
		var ok = true;
		var post_data = {};
		if (post_data != {}) {
			post_data['check-custom_test'] = "";
			$.ajax({
				url : '/problem/16',
				type : 'POST',
				dataType : 'json',
				async : false,

				data : post_data,
				success : function(data) {
					if (data.extra != undefined) {
						alert(data.extra);
						ok = false;
					}
				}
			});
		}
		$(this).find("input[type='file']").each(function() {
			for (var i = 0; i < this.files.length; i++) {
				if (this.files[i].size > 10 * 1024 * 1024) {
					$('#div-' + $(this).attr('name')).addClass('has-error');
					$('#help-' + $(this).attr('name')).text('文件大小不能超过10M');
					ok = false;
				} else {
					$('#div-' + $(this).attr('name')).removeClass('has-error');
					$('#help-' + $(this).attr('name')).text('');
				}
			}
		});
		e.preventDefault();
		if (ok) {
			$(this).ajaxSubmit({
				beforeSubmit: function(formData) {
					formData.push({name: 'submit-custom_test', value: 'custom_test', type: 'submit'});
				},
				success : function(response_text) {custom_test_onsubmit(response_text, $('#div-custom_test_result')[0], '/problem/16?get=custom-test-status-details')}
			});
		}
	});
});
</script>	</div>
	</div>
			</div>
						<div class="uoj-footer">
				<p><a href="http://uoj.ac/problem/16?locale=zh-cn"><img src="//img.uoj.ac/utility/flags/24/cn.png" alt="中文" /></a> <a href="http://uoj.ac/problem/16?locale=en"><img src="//img.uoj.ac/utility/flags/24/gb.png" alt="English" /></a></p>
				<ul class="list-inline"><li>Universal Online Judge</li>|<li><a href="http://www.miitbeian.gov.cn">鄂ICP备14016048号</a></li></ul>
				<p>Server time: 2015-08-27 12:05:33</p>
			</div>
					</div>
		<!-- /container -->
	</body>
</html>
